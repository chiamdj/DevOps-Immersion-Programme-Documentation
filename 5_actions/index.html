


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.5">
    
    
      
        <title>5. Introducing React Hooks - LTA 2nd DevOps Immersion Programme - React Web App Demo</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.63b94e9e.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.7f672a1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4caf50">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#5-introducing-react-hooks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="LTA 2nd DevOps Immersion Programme - React Web App Demo" class="md-header-nav__button md-logo" aria-label="LTA 2nd DevOps Immersion Programme - React Web App Demo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            LTA 2nd DevOps Immersion Programme - React Web App Demo
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              5. Introducing React Hooks
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="LTA 2nd DevOps Immersion Programme - React Web App Demo" class="md-nav__button md-logo" aria-label="LTA 2nd DevOps Immersion Programme - React Web App Demo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    LTA 2nd DevOps Immersion Programme - React Web App Demo
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
    
    <label class="md-nav__link" for="nav-1">
      Creating a Web App with React
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Creating a Web App with React" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Creating a Web App with React
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href=".." title="1. Setting up the environment" class="md-nav__link">
      1. Setting up the environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2_base/" title="2. The Final Product" class="md-nav__link">
      2. The Final Product
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3_card/" title="3. Our First Component" class="md-nav__link">
      3. Our First Component
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4_components/" title="4. Adding more Components" class="md-nav__link">
      4. Adding more Components
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        5. Introducing React Hooks
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="5. Introducing React Hooks" class="md-nav__link md-nav__link--active">
      5. Introducing React Hooks
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#51-concepts" class="md-nav__link">
    5.1 Concepts
  </a>
  
    <nav class="md-nav" aria-label="5.1 Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511-usestate" class="md-nav__link">
    5.1.1 UseState
  </a>
  
    <nav class="md-nav" aria-label="5.1.1 UseState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declaring-multiple-state-variables" class="md-nav__link">
    Declaring multiple state variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-effect-hook" class="md-nav__link">
    5.1.2 Effect Hook
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-rules-of-hooks" class="md-nav__link">
    5.1.3 Rules of Hooks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#52-adding-usestate-hook" class="md-nav__link">
    5.2 Adding useState hook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#53-configuring-the-button" class="md-nav__link">
    5.3 Configuring the button
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#54-configuring-the-textbox" class="md-nav__link">
    5.4 Configuring the TextBox
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#55-configuring-the-delete-icon-button" class="md-nav__link">
    5.5 Configuring the delete icon button
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#you-are-done" class="md-nav__link">
    You are done!
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Introduction to DevOps
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Introduction to DevOps" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Introduction to DevOps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../6_devOps/" title="Introduction to DevOps" class="md-nav__link">
      Introduction to DevOps
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#51-concepts" class="md-nav__link">
    5.1 Concepts
  </a>
  
    <nav class="md-nav" aria-label="5.1 Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511-usestate" class="md-nav__link">
    5.1.1 UseState
  </a>
  
    <nav class="md-nav" aria-label="5.1.1 UseState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declaring-multiple-state-variables" class="md-nav__link">
    Declaring multiple state variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-effect-hook" class="md-nav__link">
    5.1.2 Effect Hook
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-rules-of-hooks" class="md-nav__link">
    5.1.3 Rules of Hooks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#52-adding-usestate-hook" class="md-nav__link">
    5.2 Adding useState hook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#53-configuring-the-button" class="md-nav__link">
    5.3 Configuring the button
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#54-configuring-the-textbox" class="md-nav__link">
    5.4 Configuring the TextBox
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#55-configuring-the-delete-icon-button" class="md-nav__link">
    5.5 Configuring the delete icon button
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#you-are-done" class="md-nav__link">
    You are done!
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="5-introducing-react-hooks">5. Introducing React Hooks</h1>
<p>We are finally ready to make the components interactive and responsive to user input.</p>
<p>For this project, we will be adding actions on three components:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>User input</th>
<th>Response</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ListItem</code></td>
<td>Click</td>
<td>Remove the <code>listItem</code> from the <code>List</code></td>
</tr>
<tr>
<td>Delete Icon</td>
<td>Click</td>
<td>Remove the <code>listItem</code> from the <code>List</code></td>
</tr>
<tr>
<td>Button</td>
<td>Click</td>
<td>Add a <code>listItem</code> with a <code>TextField</code> where users can input text</td>
</tr>
<tr>
<td>TextField*</td>
<td>Enter</td>
<td>Add the user input into the <code>List</code></td>
</tr>
</tbody>
</table>
<p>*Only shows when user click on the <code>Button</code>.</p>
<h2 id="51-concepts">5.1 Concepts</h2>
<p>Before we start interacting the components we need to learn about <a href="https://reactjs.org/docs/hooks-intro.html">React Hooks</a>.</p>
<p><strong>What is a Hook?</strong> A Hook is a special function that lets you “hook into” React features. For example, <code>useState</code> is a Hook that lets you add React state to function components. </p>
<p><strong>When would I use a Hook?</strong> If you write a function component and realize you need to add some state to it, previously you had to convert it to a class. Now you can use a Hook inside the existing function component. We’re going to do that right now!</p>
<div class="admonition question">
<p class="admonition-title">What is a function component?</p>
<p><div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">Example</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
 <span class="c1">// You can use Hooks here!</span>
<span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span> <span class="o">/&gt;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
The code above is a <strong>function component</strong>. They are previously called Stateless components but we can now write functions and states inside them. You can only use Hooks in function components.</p>
</div>
<h3 id="511-usestate">5.1.1 <code>UseState</code></h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This section is modified from <a href="https://reactjs.org/docs/hooks-overview.html#state-hook">https://reactjs.org/docs/hooks-overview.html#state-hook</a></p>
</div>
<p>This example renders a counter. When you click the button, it increments the value:</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">Example</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Declare a new state variable, which we&#39;ll call &quot;count&quot;</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">You</span> <span class="nx">clicked</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span> <span class="nx">times</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="nx">Click</span> <span class="nx">me</span>
      <span class="o">&lt;</span><span class="err">/button&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>Here, <code>useState</code> is a <em>Hook</em> (we'll talk about what this means in a moment). We call it inside a function component to add some local state to it. React will preserve this state between re-renders.</p>
<p><code>useState</code> returns a pair: </p>
<ul>
<li>the <em>current</em> state value (i.e. <code>count</code>), and</li>
<li>function that lets you update it (i.e. <code>setCount</code>). You can call this function from an event handler or somewhere else.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is convention to name the function starting with <code>set</code>, e.g. <code>setCount</code></p>
</div>
<p>The only argument to <code>useState</code> is the initial state. In the example above, it is <code>0</code> because our counter starts from zero.  The initial state argument is only used during the first render.</p>
<h4 id="declaring-multiple-state-variables">Declaring multiple state variables</h4>
<p>You can use the State Hook more than once in a single component:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">ExampleWithManyStates</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Declare multiple state variables!</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">age</span><span class="p">,</span> <span class="nx">setAge</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">fruit</span><span class="p">,</span> <span class="nx">setFruit</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;banana&#39;</span><span class="p">);</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">todos</span><span class="p">,</span> <span class="nx">setTodos</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([{</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;Learn Hooks&#39;</span> <span class="p">}]);</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Array_destructuring">array destructuring</a> syntax lets us give different names to the state variables we declared by calling <code>useState</code>. These names aren't a part of the <code>useState</code> API. Instead, React assumes that if you call <code>useState</code> many times, you do it in the same order during every render. We'll come back to why this works and when this is useful later.</p>
<h3 id="512-effect-hook">5.1.2 Effect Hook</h3>
<p>You've likely performed data fetching, subscriptions, or manually changing the DOM from React components before. We call these operations "side effects" (or "effects" for short) because they can affect other components and can't be done during rendering.</p>
<p>The Effect Hook, <code>useEffect</code>, adds the ability to perform side effects from a function component.</p>
<p>For example, this component sets the document title after React updates the DOM:</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">Example</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="c1">// Similar to componentDidMount and componentDidUpdate:</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Update the document title using the browser API</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="sb">`You clicked </span><span class="si">${</span><span class="nx">count</span><span class="si">}</span><span class="sb"> times`</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">You</span> <span class="nx">clicked</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span> <span class="nx">times</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="nx">Click</span> <span class="nx">me</span>
      <span class="o">&lt;</span><span class="err">/button&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>When you call <code>useEffect</code>, you're telling React to run your "effect" function after flushing changes to the DOM. Effects are declared inside the component so they have access to its props and state. By default, React runs the effects after every render -- <em>including</em> the first render. (We'll talk more about how this compares to class lifecycles in <a href="/docs/hooks-effect.html">Using the Effect Hook</a>.)</p>
<p>Effects may also optionally specify how to "clean up" after them by returning a function. For example, this component uses an effect to subscribe to a friend's online status, and cleans up by unsubscribing from it:</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">FriendStatus</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">isOnline</span><span class="p">,</span> <span class="nx">setIsOnline</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="kd">function</span> <span class="nx">handleStatusChange</span><span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setIsOnline</span><span class="p">(</span><span class="nx">status</span><span class="p">.</span><span class="nx">isOnline</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">ChatAPI</span><span class="p">.</span><span class="nx">subscribeToFriendStatus</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">friend</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">handleStatusChange</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">ChatAPI</span><span class="p">.</span><span class="nx">unsubscribeFromFriendStatus</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">friend</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">handleStatusChange</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">});</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">isOnline</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;Loading...&#39;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">isOnline</span> <span class="o">?</span> <span class="s1">&#39;Online&#39;</span> <span class="o">:</span> <span class="s1">&#39;Offline&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>In this example, React would unsubscribe from our <code>ChatAPI</code> when the component unmounts, as well as before re-running the effect due to a subsequent render. (If you want, there's a way to <a href="/docs/hooks-effect.html#tip-optimizing-performance-by-skipping-effects">tell React to skip re-subscribing</a> if the <code>props.friend.id</code> we passed to <code>ChatAPI</code> didn’t change.)</p>
<p>Just like with <code>useState</code>, you can use more than a single effect in a component:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">FriendStatusWithCounter</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="sb">`You clicked </span><span class="si">${</span><span class="nx">count</span><span class="si">}</span><span class="sb"> times`</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="kr">const</span> <span class="p">[</span><span class="nx">isOnline</span><span class="p">,</span> <span class="nx">setIsOnline</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">ChatAPI</span><span class="p">.</span><span class="nx">subscribeToFriendStatus</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">friend</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">handleStatusChange</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">ChatAPI</span><span class="p">.</span><span class="nx">unsubscribeFromFriendStatus</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">friend</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">handleStatusChange</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">handleStatusChange</span><span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setIsOnline</span><span class="p">(</span><span class="nx">status</span><span class="p">.</span><span class="nx">isOnline</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
</code></pre></div>

<h3 id="513-rules-of-hooks">5.1.3 Rules of Hooks</h3>
<p>Hooks are JavaScript functions, but they impose two additional rules:</p>
<ul>
<li>Only call Hooks <strong>at the top level</strong>. Don’t call Hooks inside loops, conditions, or nested functions.</li>
<li>Only call Hooks <strong>from React function components</strong>. Don’t call Hooks from regular JavaScript functions.</li>
</ul>
<p>We provide a <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks">linter plugin</a> to enforce these rules automatically. We understand these rules might seem limiting or confusing at first, but they are essential to making Hooks work well.</p>
<h2 id="52-adding-usestate-hook">5.2 Adding <code>useState</code> hook</h2>
<p>We need the application to watch over the state for two components:</p>
<ol>
<li>The items in the list</li>
<li>The textbox that appears when the user clicks on the "Add Item" button.</li>
</ol>
<p>First import <code>useState</code> from React and <code>TextField</code> from <code>@material-ui/core</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">useState</span><span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;react&quot;</span><span class="p">;</span>
</code></pre></div>

<p>Remove the <code>listItems</code> variable you initially declared and add the following lines of code below the function <code>App</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="p">[</span><span class="nx">listItems</span><span class="p">,</span> <span class="nx">setListItems</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([</span><span class="s2">&quot;Cockles&quot;</span><span class="p">,</span> <span class="s2">&quot;Hum&quot;</span><span class="p">,</span> <span class="s2">&quot;Mee Siam&quot;</span><span class="p">]);</span>
    <span class="c1">// Initial items in the list</span>

    <span class="kr">const</span> <span class="p">[</span><span class="nx">textBox</span><span class="p">,</span> <span class="nx">setTextBox</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="c1">// Initial state of the textbox is disabled</span>
    <span class="c1">// code omitted for brevity</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="53-configuring-the-button">5.3 Configuring the button</h2>
<p>When the user clicks on the "Add Item" button, we need to:</p>
<ol>
<li>Change the state of <code>textBox</code> to <code>true</code>,</li>
<li>Display a textbox as a <code>listItem</code> at the bottom of the List.</li>
</ol>
<p>First, change the code for the <code>Button</code> component to add an <code>onClick</code> prop:</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setTextBox</span><span class="p">(</span><span class="kc">true</span><span class="p">)}</span> <span class="nx">size</span><span class="o">=</span><span class="s2">&quot;small&quot;</span><span class="o">&gt;</span>
    <span class="nx">Add</span> <span class="nx">Item</span>
<span class="o">&lt;</span><span class="err">/Button&gt;</span>
</code></pre></div>

<p>Next, add the following code block just before the <code>&lt;/List&gt;</code> tag:
<div class="highlight"><pre><span></span><code>{textBox ? (
    &lt;div&gt;
    &lt;ListItem&gt;
        &lt;ListItemIcon&gt;
        &lt;ShoppingCartIcon /&gt;
        &lt;/ListItemIcon&gt;
        &lt;TextField
        autoFocus
        label=&quot;Enter item&quot;
        style={{ width: &quot;100%&quot; }}
        /&gt;
    &lt;/ListItem&gt;
    &lt;Typography style={{ marginLeft: 70 }} variant=&quot;subtitle1&quot;&gt;
        Press Enter to add{&quot; &quot;}
    &lt;/Typography&gt;
    &lt;/div&gt;
) : null}
</code></pre></div></p>
<p>This code conditionally renders the textbox if the state of <code>textBox</code> is set to <code>true</code>. Else it renders nothing.</p>
<h2 id="54-configuring-the-textbox">5.4 Configuring the <code>TextBox</code></h2>
<p>Next, we need to add an event listener to the textbox such that when the user presses Enter, it automatically adds the user's input as a new item in <code>listItems</code>.</p>
<p>First we need to create a function to append the user's input into <code>listItems</code>. Add the following code <strong>before</strong> the function <code>App</code>:
<div class="highlight"><pre><span></span><code>  <span class="kd">function</span> <span class="nx">appendItem</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setListItems</span><span class="p">(</span><span class="nx">listItems</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">item</span><span class="p">));</span>
    <span class="nx">setTextBox</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You can only modify the state of <code>listItems</code> and <code>textBox</code> with <code>setListItems</code> and <code>setTextBox</code> respectively. Do not modify the variable directly.</p>
</div>
<p>Add the <code>onKeyPress</code> prop to the <code>TextField</code> component:</p>
<div class="highlight"><pre><span></span><code>&lt;TextField
    autoFocus
    label=&quot;Enter item&quot;
    style={{ width: &quot;100%&quot; }}
    onKeyPress={e =&gt;
        e.key === &quot;Enter&quot; ? appendItem(e.target.value) : null
    }
/&gt;
</code></pre></div>

<h2 id="55-configuring-the-delete-icon-button">5.5 Configuring the delete icon button</h2>
<p>Finally, we need to handle the event where the user clicks on the dustbin icon such that it would delete the item from the list.</p>
<p>Add the <code>onClick</code> prop to <code>DeleteForeverIcon</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">IconButton</span> <span class="nx">aria</span><span class="o">-</span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">DeleteForeverIcon</span>
        <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">removeItem</span><span class="p">(</span><span class="nx">item</span><span class="p">)}</span>
        <span class="nx">style</span><span class="o">=</span><span class="p">{{</span> <span class="nx">color</span><span class="o">:</span> <span class="s2">&quot;red&quot;</span> <span class="p">}}</span>
    <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/IconButton&gt;</span>
</code></pre></div>

<h2 id="you-are-done">You are done!</h2>
<p>Test out your app. Does it work like the one below?</p>
<iframe src="https://codesandbox.io/embed/lta-devops-immersion-programme-react-web-app-demo-answer-zzocc?fontsize=14&hidenavigation=1&theme=dark"
     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
     title="LTA DevOps Immersion Programme - React Web App Demo (Answer)"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>

<p>To build your app, run <code>npm run build</code> or <code>yarn build</code>. It will build the react files into static HTML, CSS and JSS files that can be hosted on an on-premises server or in the cloud. </p>
<p>Have any comments or feedback? Contact <a href="mailto:chiam_da_jian@lta.gov.sg">me</a>!</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../4_components/" title="4. Adding more Components" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                4. Adding more Components
              </div>
            </div>
          </a>
        
        
          <a href="../6_devOps/" title="Introduction to DevOps" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Introduction to DevOps
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d1f5a259.min.js"></script>
      <script src="../assets/javascripts/bundle.f9edbbd5.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["instant"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>